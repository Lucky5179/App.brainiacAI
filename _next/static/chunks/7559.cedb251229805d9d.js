"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7559],{92570:function(e,s,a){a.d(s,{X:function(){return h}});var t=a(57437),n=a(26428),l=a(46914),i=a(21507),c=a(12765),r=a(60598),o=a(17648),d=a(24403),x=a(99269),m=a(31869),u=a(81319),p=a(2265);let h=e=>{let{index:s,message:a,onRepeat:h}=e,[f,g]=(0,p.useState)(!1);return(0,t.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"flex items-start space-x-4",children:[(0,t.jsx)(n.h,{color:"default",className:"h-12 w-12 shrink-0",showFallback:!0,fallback:(0,t.jsx)(d.Z,{})}),(0,t.jsxs)(l.w,{children:[(0,t.jsx)(i.G,{className:"flex flex-col space-y-2",children:(0,t.jsx)(u.U,{disallowedElements:["a"],className:"text-justify",children:a})}),h&&(0,t.jsx)(c.i,{children:(0,t.jsxs)("div",{className:"flex items-center justify-end w-full",children:[(0,t.jsx)(r.A,{isIconOnly:!0,size:"sm",onClick:()=>h(a),children:(0,t.jsx)(x.Z,{size:16})}),(0,t.jsxs)("div",{className:"ml-2",children:[" ",(0,t.jsx)(r.A,{isIconOnly:!0,size:"sm",onClick:()=>{navigator.clipboard.writeText(a),g(!0),setTimeout(()=>g(!1),3e3)},children:(0,t.jsx)(m.Z,{size:16})})]}),f&&(0,t.jsx)("span",{className:"ml-2 text-gray-500",children:"Copied!"})]})})]})]},"message-".concat(s))}},7559:function(e,s,a){a.r(s),a.d(s,{default:function(){return A}});var t=a(57437);a(31596);var n=a(2265),l=a(46914),i=a(21507),c=a(68389),r=a(60598),o=a(43232),d=a(13409),x=a(97256),m=a(48793),u=a(88971),p=a(22178),h=a(53611),f=a(56926),g=a(64910),y=a(74738);let j=(0,y.Ue)(e=>({messages:[],addMessage:s=>e(e=>({messages:[...e.messages,s]})),replaceLastMessage:s=>e(e=>{let a=e.messages;return a[a.length-1]=s,{messages:a}}),clearMessages:()=>e({messages:[]})}));var w=a(70578),N=a(26428),v=a(94042),C=a(45919),b=a(77485),k=a(17648),S=a(63753),T=a(28879),z=a(77013),E=a(81319),D=a(65082),M=a(8814),Z=a(25790),O=a(30837);function U(e){let{code:s,setCode:a}=e;return(0,t.jsx)(O.ZP,{value:s,language:"sol",theme:"vs-dark",width:"100%",className:"h-[450px] w-[600px]",options:{wordWrap:"on","semanticHighlighting.enabled":"configuredByTheme",lineNumbers:"on",minimap:{enabled:!1},automaticLayout:!0,cursorBlinking:"smooth"},onChange:(e,s)=>{e&&a(e)}})}let L=e=>{let{index:s,message:a,resources:c,code:o,status:d,deploy:x,getInfo:m,checkVulnerabilities:u}=e,[p,f]=(0,n.useState)(!1),[g,y]=(0,n.useState)(!1),[j,w]=(0,n.useState)(""),[O,L]=(0,n.useState)(!1),[P,A]=(0,n.useState)(),I=(0,Z.M)(e=>e.setTarget),_=(0,Z.M)(e=>e.toggleExplainCodeModal),q=(0,M.i)(e=>e.setContractData),F=(0,M.i)(e=>e.toggleDeployContractModal),G=(0,h.U0)();(0,n.useEffect)(()=>{o&&A(o)},[o]);let B=async()=>{if(x&&P){f(!0);try{let e=await fetch("/api/contracts/compile",{method:"POST",body:JSON.stringify({code:P}),headers:{"Content-Type":"application/json"}}),{result:s}=await e.json(),{abi:a,bytecode:t,fileName:n}=s;q({abi:a,bytecode:t,fileName:n,code:P}),F()}catch(e){console.error(e)}finally{f(!1)}}},J=async()=>{if(m&&P){f(!0);try{null==G||G.capture("explain_clicked");let e=await m(P);I(e),_()}catch(e){console.error(e)}finally{f(!1)}}};return(0,t.jsxs)(k.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"flex items-start space-x-4",children:[(0,t.jsx)(N.h,{color:"default",className:"h-12 w-12 shrink-0 bg-blue-500",showFallback:!0,fallback:(0,t.jsx)(S.Z,{})}),(0,t.jsxs)(l.w,{children:[(0,t.jsxs)(v.u,{className:"flex w-full items-center justify-end space-x-2",children:[o&&(0,t.jsx)(C.z,{size:"sm",color:"default",className:"flex space-x-1 cursor-pointer",avatar:(0,t.jsx)(T.Z,{size:16}),onClick:async()=>await J(),isDisabled:p,children:(0,t.jsx)("span",{className:"text-xs",children:p?"Loading...":"Explain this"})}),"pending"!==d&&(0,t.jsx)(C.z,{size:"sm",color:O?"primary":"default",className:"flex space-x-1 cursor-pointer",avatar:(0,t.jsx)(z.Z,{size:14}),onClick:()=>L(!O),children:(0,t.jsx)("span",{className:"text-xs",children:O?"Editing":"Edit"})})]}),(0,t.jsxs)(i.G,{className:"w-max flex flex-col space-y-2 px-5 pb-5 pt-0",children:[O&&P&&(0,t.jsx)(U,{code:P||o,setCode:e=>A(e)}),!O&&!P&&(0,t.jsx)(E.U,{rehypePlugins:[D.Z],className:(0,b.cn)("text-justify","pending"===d&&"animate-pulse",o&&"text-sm"),children:a}),!O&&P&&(0,t.jsx)(E.U,{rehypePlugins:[D.Z],className:(0,b.cn)("text-justify","pending"===d&&"animate-pulse",o&&"text-sm"),children:"```solidity\n".concat(P)||0}),(0,t.jsx)("div",{className:"flex justify-end space-x-2 mt-4",children:x&&(0,t.jsx)(r.A,{size:"sm",onClick:async()=>await B(),isLoading:p,isDisabled:p||g,children:"Deploy"})})]})]})]},"message-".concat(s))};var P=a(92570);function A(){let[e,s]=(0,n.useState)(""),[a,y]=(0,n.useState)("prompt"),[N,v]=(0,n.useState)(!1),C=j(e=>e.messages),b=j(e=>e.addMessage),k=j(e=>e.clearMessages),S=j(e=>e.replaceLastMessage),{address:T,isConnected:z}=(0,f.mA)();(0,f.xx)();let{chain:E}=(0,f.LN)();(0,g.c7)(e=>e.account);let D=(0,h.U0)(),M=async()=>{await new Promise(e=>setTimeout(e,250));let e=document.getElementById("scroll-area");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})};(0,n.useEffect)(()=>{M()},[]);let Z=s=>{s.preventDefault(),O(e)},O=async e=>{if(e&&(!e||!(e.length<3))){v(!0),s(""),b({message:e,sender:"user",status:"sent"}),await M();try{b({message:"Brian is thinking...",sender:"brian",status:"pending"}),await M(),null==D||D.capture("deploy_prompt",{prompt:e});let s=await fetch("/api/contracts",{method:"POST",body:JSON.stringify({query:e,context:C.map(e=>({role:"brian"===e.sender?"assistant":"user",content:e.message}))}),headers:{"Content-Type":"application/json"}}),{result:a}=await s.json();S({sender:"brian",message:"```solidity\n".concat(a),code:a,status:"sent",getInfo:async e=>{let s=await fetch("/api/contracts",{method:"POST",body:JSON.stringify({query:"Can you explain to me what does this code do?\n\n".concat(e),explain:!0}),headers:{"Content-Type":"application/json"}}),{result:a}=await s.json();return a},deploy:!0}),await M()}catch(e){console.error(e)}finally{v(!1)}}};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,t.jsx)("div",{id:"scroll-area",className:(0,w.cn)("relative flex h-full flex-col space-y-4 px-2 py-4",z&&"overflow-y-scroll pr-0 md:pr-4"),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-center text-sm text-gray-400 opacity-60",children:"Start deploying Smart Contracts below!"}),0===C.length&&(0,t.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center space-y-4",children:[(0,t.jsx)("p",{className:"text-center",children:"Don't know where to start? Try one of these."}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[{question:"Deploy an erc20"},{question:"Create an nft collection"},{question:"Generate a vault contract"}].map((e,s)=>{let{question:a}=e;return(0,t.jsx)(l.w,{id:a,className:"cursor-pointer transition-transform hover:-translate-y-2",children:(0,t.jsx)(i.G,{className:"text-sm text-center",onClick:()=>O(a),children:a})})})})]}),C.map((e,s)=>{let{message:a,sender:n,status:l,resources:i,code:c,getInfo:r,deploy:o,checkVulnerabilities:d}=e;return"user"===n?(0,t.jsx)(P.X,{index:s,message:a}):(0,t.jsx)(L,{index:s,message:a,status:l,resources:i,code:c,getInfo:r,deploy:o,checkVulnerabilities:d})})]})}),(0,t.jsxs)("form",{className:"mt-4 flex flex-col items-center space-x-0 space-y-2 md:flex-row md:space-x-2 md:space-y-0",onSubmit:e=>Z(e),children:[(0,t.jsx)(c.Y,{id:"builds-input",value:e.replace("\n",""),onValueChange:e=>s(e),variant:"bordered",autoComplete:"new-password",autoCapitalize:"false",autoCorrect:"false",isClearable:!0,placeholder:"Start typing here! Try something like `Can you give me the code of an ERC-20 Smart Contract?`."}),(0,t.jsxs)("div",{className:"flex w-full items-center space-x-2 md:w-auto",children:[(0,t.jsx)(r.A,{isLoading:N,isDisabled:e.length<3,className:"w-full bg-teal-500 md:w-auto",type:"submit",children:"Generate"}),(0,t.jsxs)(o.F,{placement:"top",children:[(0,t.jsx)(d.S,{children:(0,t.jsx)(r.A,{isIconOnly:!0,variant:"flat",children:(0,t.jsx)(u.Z,{size:16})})}),(0,t.jsx)(x.a,{disabledKeys:0===C.length?["delete"]:[],children:(0,t.jsx)(m.W,{className:"text-danger",color:"danger",onClick:()=>k(),startContent:(0,t.jsx)(p.Z,{size:16,className:"text-danger group-hover:text-white"}),children:"Clear conversation"},"delete")})]})]})]})]})})}},8814:function(e,s,a){a.d(s,{i:function(){return n}});var t=a(74738);let n=(0,t.Ue)(e=>({open:!1,toggleDeployContractModal:()=>e(e=>({open:!e.open})),contractData:void 0,setContractData:s=>e({contractData:s})}))},25790:function(e,s,a){a.d(s,{M:function(){return n}});var t=a(74738);let n=(0,t.Ue)(e=>({open:!1,toggleExplainCodeModal:()=>e(e=>({open:!e.open})),target:"",setTarget:s=>e({target:s})}))}}]);